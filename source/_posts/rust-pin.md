---
title: Rust 异步编程（三）：Pin 详解
date: 2023-02-23 00:58:13
published: false
tags:
categories:
- Rust
---

本节不讲异步编程。但 Pin 最先出现的地方就是在我们使用 Future 的时候，因此放入 异步编程里面讲了。

Pin 的确是一个很特殊的容器，官方文档和其它查到的资料实在晦涩难懂，甚至我一度怀疑写那些文档的人自己看懂没有。还是那一句话，如果文档和各种资料都看不懂的话，那么，看源码就可以了。

但实际上，Pin 却又是非常简单的容器，甚至可以这么说，它的特殊之处就是因为它比较简单。Pin 如此之简单，以至于我一句话就可以把 Pin 的作用说完：若发现 T 是一个 pinned struct，即禁止内存移动的结构体，则 Pin 是一个禁止返回 &mut T 而设计出来的容器。

下面，我们把官方文档拆开来讲，深入浅出的彻底搞懂 Pin 吧。



<!--more-->

## Rust  的原始指针



## Pin 的设计思想



## 内存移动的坑



## Pin 是如何保护我们的 struct 的

### 栈数据保护

### 堆数据保护



## 前方高能：即使用了 Pin 也能移动内存



